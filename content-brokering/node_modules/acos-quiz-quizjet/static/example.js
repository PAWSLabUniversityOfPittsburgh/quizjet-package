var request = new XMLHttpRequest();
request.open('GET', 'http://localhost:1337/test.php',false);  // `false` makes the request synchronous
request.send(null);
abc = request.responseText;
//console.log(abc);
a = JSON.parse(abc);
//console.log(a);

/*
 window.annotated = {
 Hello_World: {
 language: "python",
 author: "Hardik",
 lines: [
 {line: "a = float(input('First number?'))", comment: "Taking First number as an input from the user and storing it in the variable 'a'"},
 {line: "b = float(input('Second number?''))", comment: "Taking Second number as an input from the user and storing it in the variable 'b'"},
 {line: "max = a", comment: "Here, we assume that a is the maximum of two numbers"},
 {line: "if b > max:", comment: "But we check the condition, if 'b' is greater than max (i.e. 'a'), then..."},
 {line: "	max = b", comment: "then value of 'b' is assigned to 'max'"},
 {line: ""},
 {line: "print(max, 'is the maximum')", comment: "Printing out the max number"}
 ]
 },



 ----------------------------------------------------------------------------------------

 [
 {
 "topic_name": "Variables",
 "rdf_id": "pyt1.1",
 "ex_name": "Hello World",
 "line_number": "1",
 "code": "print (\"Hello World!\")",
 "comment": "This is a simple statement which prints out the string 'Hello World!'. Python 3 syntax suggests that everything that needs to be printed out should be enclosed in the round parenthesis '()'."
 },
 */

String.prototype.replaceAll = function(str1, str2, ignore)
{
    return this.replace(new RegExp(str1.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$&"),(ignore?"gi":"g")),(typeof(str2)=="string")?str2.replace(/\$/g,"$$$$"):str2);
}

window.annotated = {};

var prev_rdfid = "";
lines = [];
for(var i = 0; i < a.length; i++) {
    var topic_name = a[i].topic_name
    var language = "Python 3.x";
    var author = "Hardik Vasa";
    var rdfid = a[i].rdf_id;
    var line = a[i].line_number;

    if (line == "1")
    {
        //create a new object
        //insert top level object inside windows.annotated
        var title = a[i].rdf_id//.replaceAll('.','');
        annotated[title] = {}
        annotated[title].language = language;
        annotated[title].author = author;
        annotated[title].lines = [];
        annotated[title].lines.push({"line":a[i].code,"comment":a[i].comment});
    }
    else
    {
        //add code lines and comments to existing object in windows.annotated
        try
        {
            annotated[title].lines.push({"line":a[i].code,"comment":a[i].comment});
        }
        catch(err)
        {
            continue;
        }
    }
    prev_rdfid = rdfid;
}

console.log(annotated)
//console.log(a[1].topic_name)

//data['items'][1]['name']


//window.annotated['Hello_World'] = {};
//annotated.Hello_World['lines'] = [];
//annotated.Hello_World.lines[0] = {line: "print('Hello World!')", comment: "Prints out Hello World!"};
//annotated.Hello_World.lines[1] = {line: "a = float(input('First number?'))", comment: "Taking First number as an input from the user and storing it in the variable 'a'"};
//annotated.Hello_World.lines[2] = {line: "b = float(input('Second number?''))", comment: "Taking Second number as an input from the user and storing it in the variable 'b'"};
//annotated.Hello_World.lines[3] = {line: "max = a", comment: "Here, we assume that a is the maximum of two numbers"};
//annotated.Hello_World.lines[4] = {line: "if b > max:", comment: "But we check the condition, if 'b' is greater than max (i.e. 'a'), then..."};
//annotated.Hello_World.lines[5] = {line: "	max = b", comment: "then value of 'b' is assigned to 'max'"};